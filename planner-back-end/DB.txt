CREATE TABLE "user" (
  id VARCHAR(191) PRIMARY KEY DEFAULT gen_random_uuid(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  email VARCHAR(191) UNIQUE,
  name VARCHAR(191),
  password VARCHAR(191) NOT NULL,
  work_interval INT DEFAULT 50,
  break_interval INT DEFAULT 10,
  intervals_count INT DEFAULT 7
);

CREATE TABLE "task" (
  id VARCHAR(191) PRIMARY KEY DEFAULT gen_random_uuid(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  name VARCHAR(191) NOT NULL,
  priority VARCHAR(191),
  is_completed BOOLEAN DEFAULT FALSE,
  user_id VARCHAR(191) REFERENCES "user"(id) ON DELETE CASCADE
);

CREATE TABLE "time_block" (
  id VARCHAR(191) PRIMARY KEY DEFAULT gen_random_uuid(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  name VARCHAR(191) NOT NULL,
  color VARCHAR(191),
  duration INT NOT NULL,
  "order" INT DEFAULT 1,
  user_id VARCHAR(191) REFERENCES "user"(id) ON DELETE CASCADE
);

CREATE TABLE "pomodoro_session" (
  id VARCHAR(191) PRIMARY KEY DEFAULT gen_random_uuid(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  is_completed BOOLEAN DEFAULT FALSE,
  user_id VARCHAR(191) REFERENCES "user"(id) ON DELETE CASCADE
);

CREATE TABLE "pomodoro_round" (
  id VARCHAR(191) PRIMARY KEY DEFAULT gen_random_uuid(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  total_seconds INT,
  is_completed BOOLEAN DEFAULT FALSE,
  pomodoro_session_id VARCHAR(191) REFERENCES "pomodoro_session"(id) ON DELETE CASCADE
);
